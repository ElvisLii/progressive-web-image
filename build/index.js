!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pwi",[],e):"object"==typeof exports?exports.pwi=e():t.pwi=e()}(this,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ProgressiveImage:()=>n});var n=function(){function t(t){var e=this;this.el=t.el||document,this.lazyClass=t.lazyClass||"lazy",this.removePreview=!1,this.events=["scroll","resize"],this.windowIsBind=!1,this.animationEvent=this.getAnimationEvent(),this.lazy=function(t,e){var n=this;void 0===e&&(e=300);var i=0;return function(){Date.now()-i>=e&&(i=Date.now(),t.call(n))}}((function(){e.fire()}))}return t.prototype.fire=function(){this.windowIsBind||(this.windowIsBind=!0,this.bindEvent(window,!0));var t=document.querySelectorAll(this.el+" img."+this.lazyClass);if(t.length>0)for(var e=0;e<t.length;e++){var n=t[e].getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&this.loadImage(t[e])}},t.prototype.loadImage=function(t){var e=this,n=new Image;n.src=t.dataset.src,n.className="origin",this.scale&&n.classList.add("origin-scale"),n.onload=function(){e.mountImage(t,n)},t.classList.remove(""+this.lazyClass)},t.prototype.mountImage=function(t,e){var n=this,i=t.parentNode;i.appendChild(e).addEventListener(this.animationEvent,(function(e){n.removePreview&&(i.removeChild(t),e.target.classList.remove("origin","origin-scale"))}))},t.prototype.getAnimationEvent=function(){var t=document.createElement("fa"),e={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var n in e)if(void 0!==t.style[n])return e[n]},t.prototype.bindEvent=function(t,e){var n=this;e?this.events.forEach((function(e){!function(t,e,n){t.addEventListener(e,n)}(t,e,n.lazy)})):this.events.forEach((function(e){!function(t,e,n){t.removeEventListener(e,n)}(t,e,n.lazy)}))},t}();return e})()}));